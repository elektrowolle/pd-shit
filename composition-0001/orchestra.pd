#N struct playhead float x;
#N struct datum float x float y float n symbol note;
#N canvas 37 126 1151 423 10;
#X declare -path ../utils;
#X obj 229 3 cnv 15 200 40 empty empty empty 20 12 0 14 -257985 -66577
0;
#X obj 540 37 cnv 15 200 200 empty empty empty 20 12 0 14 -257985 -66577
0;
#X obj 547 296 dac~;
#X obj 566 245 *~ 0.2;
#N canvas 513 173 532 811 get-closest-to-playhead 0;
#X msg 47 93 traverse pd-conductor;
#X msg 61 139 next;
#X obj 47 264 get playhead x;
#X obj 184 266 get datum x;
#X obj 47 171 pointer playhead datum;
#X obj 61 116 until;
#X obj 186 324 moses, f 22;
#X obj 186 450 select 1;
#X obj 205 479 f, f 7;
#X obj 184 427 >;
#X obj 336 478 f, f 6;
#X obj 315 431 <;
#X obj 315 453 select 1;
#X obj 66 369 v close-right;
#X obj 330 408 v close-right;
#X obj 318 362 t f b f, f 9;
#X obj 336 502 v close-right;
#X obj 47 414 v close-left;
#X obj 186 357 t f b f, f 10;
#X obj 205 501 v close-left;
#X obj 200 403 v close-left;
#X obj 27 53 t b b b;
#X obj 29 688 v close-right;
#X obj 69 598 v close-left;
#X obj 47 288 t b b f;
#X text 215 77 assumes that playhead is the first element - if it's
not \, just run this twice., f 44;
#X obj 28 28 inlet;
#X obj 86 324 v playhead-x;
#X obj 51 645 v playhead-x;
#X obj 29 750 pack f f f;
#X obj 29 772 outlet;
#X text 242 21 get the two datum elements closest to either side of
the playhead (left and right of it), f 34;
#X obj 315 555 pointer;
#X obj 215 717 pack p p, f 15;
#X obj 187 551 pointer;
#X obj 28 566 t b b b b, f 11;
#X obj 354 532 r datum-ptr;
#X obj 212 247 s datum-ptr;
#X obj 226 530 r datum-ptr;
#X obj 302 691 pointer;
#X obj 215 692 pointer;
#X obj 215 646 t b b, f 15;
#X obj 215 739 outlet;
#X obj 187 573 s ptr-left;
#X obj 315 577 s ptr-right;
#X obj 341 665 r ptr-left;
#X obj 254 667 r ptr-right;
#X obj 185 226 t p p;
#X text 293 234 TODO generalize this to work for all structs so they
can be used in the same composition., f 37;
#X text 247 120 return all x values involved as well as pointers to
the two elements., f 36;
#X msg 66 346 999999;
#X msg 47 392 -999999;
#X connect 0 0 4 0;
#X connect 1 0 4 0;
#X connect 2 0 24 0;
#X connect 3 0 6 0;
#X connect 4 0 2 0;
#X connect 4 1 47 0;
#X connect 4 3 5 1;
#X connect 5 0 1 0;
#X connect 6 0 18 0;
#X connect 6 1 15 0;
#X connect 7 0 8 0;
#X connect 7 0 34 0;
#X connect 8 0 19 0;
#X connect 9 0 7 0;
#X connect 10 0 16 0;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X connect 12 0 32 0;
#X connect 14 0 11 1;
#X connect 15 0 11 0;
#X connect 15 1 14 0;
#X connect 15 2 10 1;
#X connect 18 0 9 0;
#X connect 18 1 20 0;
#X connect 18 2 8 1;
#X connect 20 0 9 1;
#X connect 21 0 35 0;
#X connect 21 1 5 0;
#X connect 21 2 0 0;
#X connect 22 0 29 0;
#X connect 23 0 29 2;
#X connect 24 0 51 0;
#X connect 24 1 50 0;
#X connect 24 2 6 1;
#X connect 24 2 27 0;
#X connect 26 0 21 0;
#X connect 28 0 29 1;
#X connect 29 0 30 0;
#X connect 32 0 44 0;
#X connect 33 0 42 0;
#X connect 34 0 43 0;
#X connect 35 0 22 0;
#X connect 35 1 28 0;
#X connect 35 2 23 0;
#X connect 35 3 41 0;
#X connect 36 0 32 1;
#X connect 38 0 34 1;
#X connect 39 0 33 1;
#X connect 40 0 33 0;
#X connect 41 0 40 0;
#X connect 41 1 39 0;
#X connect 45 0 39 1;
#X connect 46 0 40 1;
#X connect 47 0 3 0;
#X connect 47 1 37 0;
#X connect 50 0 13 0;
#X connect 51 0 17 0;
#X restore 253 259 pd get-closest-to-playhead;
#N canvas 0 101 389 412 interpolate-at-playhead 0;
#X obj 43 109 unpack f f f;
#X obj 89 134 -;
#X obj 49 134 -;
#X obj 64 195 /;
#X floatatom 64 217 5 0 0 0 scale - -, f 5;
#X obj 64 167 swap;
#X obj 196 112 unpack p p, f 13;
#X obj 271 146 get datum n;
#X floatatom 271 168 5 0 0 1 left - -, f 5;
#X obj 196 146 get datum n;
#X floatatom 196 168 5 0 0 0 right - -, f 5;
#X obj 228 201 -;
#X floatatom 228 223 5 0 0 0 difference - -, f 5;
#X obj 174 264 *;
#X floatatom 133 290 5 0 0 0 - - -, f 5;
#X obj 174 317 +;
#X floatatom 134 343 5 0 0 0 - - -, f 5;
#X obj 175 365 mtof;
#X floatatom 137 389 5 0 0 0 - - -, f 5;
#X obj 43 87 inlet;
#X obj 196 89 inlet;
#X obj 175 387 outlet;
#X text 13 8 interpolate the (note) value of the two closest structs
at the current position of the playhead.;
#X connect 0 0 2 0;
#X connect 0 1 1 0;
#X connect 0 2 1 1;
#X connect 0 2 2 1;
#X connect 1 0 5 1;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 3 0 13 0;
#X connect 5 0 3 0;
#X connect 5 1 3 1;
#X connect 6 0 9 0;
#X connect 6 1 7 0;
#X connect 7 0 8 0;
#X connect 7 0 11 1;
#X connect 8 0 15 1;
#X connect 9 0 10 0;
#X connect 9 0 11 0;
#X connect 11 0 12 0;
#X connect 11 0 13 1;
#X connect 13 0 14 0;
#X connect 13 0 15 0;
#X connect 15 0 16 0;
#X connect 15 0 17 0;
#X connect 17 0 18 0;
#X connect 17 0 21 0;
#X connect 19 0 0 0;
#X connect 20 0 6 0;
#X restore 253 279 pd interpolate-at-playhead;
#X obj 212 190 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 234 122 bang;
#X msg 242 144 stop;
#X obj 237 370 line~;
#N canvas 0 101 450 300 move-playhead 0;
#X obj 98 70 inlet;
#X msg 98 116 traverse pd-conductor \, next;
#X obj 98 138 pointer playhead;
#X obj 98 226 set playhead x;
#X obj 98 183 get playhead x;
#X obj 98 160 t p p;
#X obj 98 205 + 1;
#X obj 98 92 b;
#X text 75 16 move playehead 1 second forward;
#X connect 0 0 7 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 5 1 3 1;
#X connect 6 0 3 0;
#X connect 7 0 1 0;
#X restore 273 229 pd move-playhead;
#X obj 234 190 t b b b;
#X obj 236 326 f;
#X floatatom 269 302 5 0 0 0 - - -, f 5;
#X obj 234 168 metro 0.1 1 sec;
#X msg 237 348 \$1 100;
#X obj 237 391 s~ master-freq;
#X obj 560 25 r~ master-freq;
#X msg 262 14 play;
#X msg 308 14 pause;
#X msg 361 13 stop;
#X msg 270 78 \; pd dsp 1;
#X msg 336 79 \; pd dsp 0;
#N canvas 0 87 450 300 zero-playhead 0;
#X obj 99 28 inlet;
#X msg 99 74 traverse pd-conductor \, next;
#X obj 99 96 pointer playhead;
#X obj 99 164 set playhead x;
#X obj 99 50 b;
#X obj 99 118 t b p;
#X msg 99 140 0;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 4 0 1 0;
#X connect 5 0 6 0;
#X connect 5 1 3 1;
#X connect 6 0 3 0;
#X restore 365 58 pd zero-playhead;
#X obj 560 53 instrument;
#X obj 12 16 cnv 15 100 40 empty empty empty 20 12 0 14 -257985 -66577
0;
#N canvas 33 614 1163 302 conductor 1;
#X scalar playhead 0 \;;
#X scalar datum 20 193 64 E-5 \;;
#X scalar datum 30 144 48 C-4 \;;
#X scalar datum 0 144 48 C-4 \;;
#X scalar datum 80 384 128 G#: \;;
#X scalar datum 100 0 0 C-0 \;;
#X scalar datum 829 200 66 F#5 \;;
#X scalar datum 125 37 12 C-1 \;;
#X scalar datum 222 45 15 D#1 \;;
#X scalar datum 50 193 64 E-5 \;;
#X scalar datum 60 144 48 C-4 \;;
#X scalar datum 120 182 60 C-5 \;;
#X scalar datum 130 102 34 A#2 \;;
#X restore 22 25 pd conductor;
#N canvas 658 355 867 644 datum 0;
#X obj 31 545 set -symbol datum note;
#X obj 133 193 unpack p f;
#X obj 31 393 nth;
#X obj 46 352 loadbang;
#X obj 31 240 get datum y;
#X obj 31 284 int;
#X obj 31 262 / 3;
#X obj 31 329 mod 12;
#X obj 133 215 t p p;
#X obj 131 428 / 12;
#X obj 131 450 int;
#X obj 31 472 list fromsymbol;
#X obj 31 499 list append;
#X obj 31 306 t f f, f 17;
#X obj 31 521 list tosymbol;
#X obj 131 472 + 48;
#X obj 133 149 struct datum float x float y float n symbol note;
#X msg 46 373 C- C# D- D# E- F- F# G- G# A- A# B-;
#X obj 192 546 set datum n;
#X obj 38 11 drawpolygon 0 1 0 y(0:1000)(0:-1000) 0 0 20 0;
#X obj 336 231 print struct;
#X obj 133 171 route displace change;
#X obj 206 193 unpack p f;
#X obj 39 46 drawnumber x 0 0 0 x=;
#X obj 38 69 drawnumber y 0 10 0 y=;
#X obj 38 111 drawnumber n 0 20 0 note=;
#X obj 38 91 drawsymbol note 0 30 0;
#X connect 1 0 8 0;
#X connect 2 0 11 0;
#X connect 3 0 17 0;
#X connect 4 0 6 0;
#X connect 5 0 13 0;
#X connect 6 0 5 0;
#X connect 7 0 2 0;
#X connect 8 0 4 0;
#X connect 8 1 0 1;
#X connect 8 1 18 1;
#X connect 9 0 10 0;
#X connect 10 0 15 0;
#X connect 11 0 12 0;
#X connect 12 0 14 0;
#X connect 13 0 7 0;
#X connect 13 1 9 0;
#X connect 13 1 18 0;
#X connect 14 0 0 0;
#X connect 15 0 12 1;
#X connect 16 0 21 0;
#X connect 17 0 2 1;
#X connect 21 0 1 0;
#X connect 21 1 22 0;
#X connect 21 2 20 0;
#X connect 22 0 8 0;
#X restore 20 79 pd datum;
#N canvas 452 380 450 300 playhead 0;
#X obj 35 21 struct playhead float x;
#X obj 35 91 drawnumber x 0 300 900;
#X obj 35 63 drawpolygon 900 3 0 0 0 300;
#X restore 20 99 pd playhead;
#N canvas 0 87 417 320 reset-the-conductor 0;
#X msg 198 151 traverse pd-conductor \, bang;
#X obj 198 173 pointer;
#X msg 178 19 reset;
#X msg 48 182 100 100 \, 200 200;
#X msg 219 103 \; pd-conductor clear;
#X obj 48 209 append datum x y;
#X obj 146 278 append playhead x;
#X msg 147 251 10;
#X obj 178 61 t b b b b;
#X connect 0 0 1 0;
#X connect 1 0 5 2;
#X connect 1 0 6 1;
#X connect 2 0 8 0;
#X connect 3 0 5 0;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 8 1 3 0;
#X connect 8 2 0 0;
#X connect 8 3 4 0;
#X restore 19 159 pd reset-the-conductor;
#X text 757 128 . . .;
#X obj 17 256 declare -path ../utils;
#X connect 3 0 2 0;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X connect 4 1 5 1;
#X connect 5 0 12 1;
#X connect 5 0 13 0;
#X connect 7 0 14 0;
#X connect 8 0 14 0;
#X connect 9 0 16 0;
#X connect 11 0 12 0;
#X connect 11 1 4 0;
#X connect 11 2 10 0;
#X connect 12 0 15 0;
#X connect 14 0 6 0;
#X connect 14 0 11 0;
#X connect 15 0 9 0;
#X connect 17 0 24 0;
#X connect 18 0 7 0;
#X connect 18 0 21 0;
#X connect 19 0 8 0;
#X connect 19 0 22 0;
#X connect 20 0 22 0;
#X connect 20 0 23 0;
#X connect 20 0 8 0;
#X connect 24 0 3 0;
